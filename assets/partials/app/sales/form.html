<div class="">
  <div class="page-title">
    <div class="title">
      <h3 ng-if="sale.id">Edit Project {{sale.name}}</h3>
      <h3 ng-if="!sale.id">Create New Project</h3>
    </div>
  </div>
  <div class="clearfix"></div>

  <div class="row">
    <div class="col-md-12 col-sm-12 col-xs-12">
      <div class="x_panel">
        <div class="x_content">
          <pre ng-if="errors">{{errors}}</pre>

          <form fs-form-for name="saleForm" model="sale" ng-submit="save()">
            <fieldset class="form-horizontal">
              <div class="row">
                <div class="col-xs-6">
                  <fs-input as="text" name="name" label="Name"></fs-input>
                  <div company-select label="Company" model="sale.company"></div>
                  <div person-select provider-options="{company: sale.company.id}" label="Company Contact" model="sale.companyContact"></div>
                  <div person-select label="Tech Lead" model="sale.techLead"></div>
                  <div person-select label="Sales Lead" model="sale.localContact"></div>
                  <div sale-state-select model="sale.state"></div>
                </div>
                <div class="col-xs-6">
                  <div sale-usecase-select model="sale.useCase"></div>
                  <fs-input as="text" name="expectedRevenue" label="Expected Revenue"></fs-input>
                  <fs-input as="text" name="reasonOfLoss" label="Reason of Loss"></fs-input>
                  <fs-row label="Expected close date">
                    <input class="form-control" type="date" ng-model="sale.expectedCloseDate">
                  </fs-row>
                  <fs-input as="textarea" name="description" label="Description"></fs-input>
                </div>
              </div>

              <div class="ln_solid"></div>
              <div class="form-group text-center">
                <a href ng-click="close()" class="btn btn-primary">Cancel</a>
                <button type="submit" class="btn btn-success">Save</button>
                <a ng-if="sale.id" href confirm="{{'DELETE_CONFIRMATION' | translate:{title: sale.name} }}" ng-click="delete(sale)" class="btn btn-danger">Delete</a>
                <a ng-if="sale.id" href ng-click="createDelivery()" class="btn btn-default">Create Delivery</a>
                <a ng-disabled="!sale.deliveries.length" ng-if="sale.id" href ng-click="sale.deliveries.length && createInvoice()" class="btn btn-default">Create Invoice</a>
              </div>
            </fieldset>
          </form>
        </div>
      </div>
    </div>
  </div>

  <div ng-if="sale.id">
    <div comments-list sale="sale"></div>
    <div offers-table sale="sale"></div>
    <div orders-table sale="sale"></div>
    <div deliveries-table sale="sale"></div>
    <div invoices-table sale="sale"></div>
    <div machines-table sale="sale"></div>
  </div>
</div>
